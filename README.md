# 放射性药物分装计算器

一个专业的Web应用，用于计算放射性药物的分装剂量。基于放射性衰变公式，为核医学技术人员提供准确的计算工具。

## 功能特点

- **核素支持**: 支持F-18和C-11两种常用放射性核素
- **实时计算**: 输入变化时自动重新计算
- **时间管理**: 精确的时间计算，支持东八区时间
- **数据持久化**: 自动保存用户输入的历史数据
- **响应式设计**: 完美适配桌面和移动设备
- **专业界面**: 分区显示，直观易用

## 技术栈

- **后端**: Python Flask
- **前端**: HTML5, CSS3, JavaScript (ES6+)
- **部署**: Render平台
- **数据存储**: JSON文件

## 核心算法

### 放射性衰变公式
```
A(t) = A₀ × (0.5)^(t/T₁/₂)
```

其中：
- A(t): 时间t后的活度
- A₀: 初始活度
- t: 经过的时间
- T₁/₂: 半衰期

### 浓度计算
```
浓度 = 活度 / 体积
```

### 体积计算
```
所需体积 = 目标剂量 / 当前浓度
```

## 安装和运行

### 本地开发

1. 克隆项目
```bash
git clone <repository-url>
cd dose-splitter-calculator
```

2. 安装依赖
```bash
pip install -r requirements.txt
```

3. 运行应用
```bash
python app.py
```

4. 访问应用
打开浏览器访问 `http://localhost:5000`

### 部署到Render

1. 将代码推送到GitHub仓库
2. 在Render平台创建新的Web Service
3. 连接GitHub仓库
4. 配置构建命令: `pip install -r requirements.txt`
5. 配置启动命令: `gunicorn app:app`
6. 部署应用

## API接口

### 计算接口
- **URL**: `/api/calculate`
- **方法**: POST
- **参数**:
  - `nuclide`: 核素类型 (F18/C11)
  - `init_time`: 初始活度时间 (HH:MM)
  - `target_time`: 标定时间 (HH:MM)
  - `init_activity`: 初始活度 (mCi)
  - `init_volume`: 初始体积 (mL)
  - `desired_dose`: 目标剂量 (mCi)

### 当前时间接口
- **URL**: `/api/current-time`
- **方法**: GET
- **返回**: 东八区当前时间

### 保存数据接口
- **URL**: `/api/saved-data`
- **方法**: GET
- **返回**: 用户保存的历史数据

### 核素信息接口
- **URL**: `/api/nuclides`
- **方法**: GET
- **返回**: 支持的核素信息

### 健康检查接口
- **URL**: `/health`
- **方法**: GET
- **返回**: 服务状态

## 使用说明

1. **选择核素**: 点击F-18或C-11按钮选择对应的放射性核素
2. **设置初始数据**: 
   - 输入初始活度时间（或点击"填充当前时间"）
   - 输入初始活度和体积
3. **设置分装参数**:
   - 设置标定时间
   - 使用快速时间按钮调整时间
   - 输入目标剂量
4. **查看结果**: 系统自动计算并显示所需抽取体积

## 核素参数

| 核素 | 半衰期(分钟) | 用途 |
|------|-------------|------|
| F-18 | 109.7 | FDG PET显像 |
| C-11 | 20.3 | Choline PET显像 |

## 安全说明

- 所有计算在本地进行，不涉及敏感数据传输
- 数据仅保存在本地JSON文件中
- 支持HTTPS加密传输

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 移动设备支持

- iOS Safari 12+
- Android Chrome 60+
- 响应式设计，完美适配各种屏幕尺寸

## 开发团队

- **开发者**: 武奕辰
- **项目类型**: 核医学专业工具
- **版本**: 1.0.0

## 许可证

本项目仅供医疗专业人员使用，请确保遵守相关法规和标准。

## 更新日志

### v1.0.0 (2025-01-14)
- 初始版本发布
- 支持F-18和C-11核素
- 完整的Web界面
- 响应式设计
- 数据持久化功能
